grafana:
  adminUser: admin
  adminPassword: changeme
  service:
    type: LoadBalancer

prometheus:
  serviceMonitorSelectorNilUsesHelmValues: false
  podMonitorSelectorNilUsesHelmValues: false
  service:
    type: LoadBalancer
  prometheusSpec:
    retention: 7d
    scrapeInterval: 30s
    evaluationInterval: 30s
    ruleSelectorNilUsesHelmValues: false
    additionalPrometheusRulesMap:
      rag-chatbot-rules:
        groups:
          - name: rag-chatbot.rules
            rules:
              - alert: HighErrorRate
                expr: rate(http_requests_total{app="rag-chatbot",status=~"5.."}[5m]) / rate(http_requests_total{app="rag-chatbot"}[5m]) > 0.05
                for: 10m
                labels:
                  severity: warning
                annotations:
                  summary: "High 5xx error rate on rag-chatbot"
                  description: "More than 5% of requests are failing over 10m."
              - alert: HighCPUUtilization
                expr: avg(node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate{namespace="rag"}) by (namespace) > 0.8
                for: 10m
                labels:
                  severity: warning
                annotations:
                  summary: "High CPU usage in namespace rag"
                  description: "CPU utilization above 80% for 10m."

alertmanager:
  enabled: true
  service:
    type: LoadBalancer
  config:
    global:
      resolve_timeout: 5m
    route:
      receiver: default-receiver
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 3h
    receivers:
      - name: default-receiver
        # wire email/webhook here
        webhook_configs: []
