image:
  repository: asia-southeast1-docker.pkg.dev/exercise-428817/chatbot/hust-rag-chatbot
  tag: 9aff78c
  pullPolicy: IfNotPresent

replicaCount: 2

service:
  type: ClusterIP
  port: 8000

resources:
  limits:
    cpu: 200m
    memory: 512Mi
  requests:
    cpu: 50m
    memory: 128Mi

# Static environment variables injected directly
env:
  OPENAI_API_KEY: ""
  OPENAI_MODEL: "gpt-4o-mini"
  EMBEDDING_PROVIDER: "sentence-transformers"
  EMBEDDING_MODEL: "bkai-foundation-models/vietnamese-bi-encoder"
  TOP_K: "5"
  HYBRID_ALPHA: "0.55"
  CHUNK_SIZE: "500"
  CHUNK_OVERLAP: "75"

# Optional ConfigMap-style settings (mirrors reference RAG controller chart)
configmap:
  enabled: true
  name: "rag-configmap"
  data:
    PROFILES: prod
    RAG_WORKERS: "1"
    LLM_MODE: openai
    EMBEDDING_MODE: sentence-transformers
    VECTOR_STORE: weaviate
    LLM_ENDPOINT: ""
    VLLM_ENDPOINT: ""
    TEXT_EMBEDDINGS_INFERENCE_ENDPOINT: ""
    WEAVIATE_ENDPOINT: ""
    SIMILARITY_TOP_K: "5"
    VLLM_MAX_TOKENS: "512"

# Optional Secret for sensitive keys (e.g., NVIDIA_NIM_API, OpenAI keys)
secret:
  enabled: true
  name: "rag-secret"
  useExisting: true

extraEnv: []

nodeSelector: {}
tolerations: []
affinity: {}

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: chatbot.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []

serviceMonitor:
  enabled: false
  interval: 30s
  scrapeTimeout: 10s

hpa:
  enabled: true
  minReplicas: 2
  maxReplicas: 5
  cpu:
    targetAverageUtilization: 70
