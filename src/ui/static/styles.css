body{font-family:Inter,system-ui,Arial,Helvetica,sans-serif;background:#f6f8fa;margin:0;padding:40px;color:#111}
#app{max-width:800px;margin:0 auto;background:#fff;padding:24px;border-radius:8px;box-shadow:0 6px 20px rgba(12,15,20,0.06)}
h1{margin:0 0 16px}
textarea{width:100%;padding:12px;border:1px solid #e6e8eb;border-radius:6px;font-size:14px}
.controls{margin-top:8px;display:flex;align-items:center;gap:8px}
button{background:#2563eb;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
button.secondary{background:#e5e7eb;color:#111}
.answer{margin-top:12px;padding:12px;background:#f3f4f6;border-radius:6px}
.panel{margin-top:12px}
.hidden{display:none}
.tabs{display:flex;gap:8px;margin-bottom:12px}
.tabs button{background:#e6edf8;color:#1f2937;padding:8px 10px;border-radius:6px}
.tabs button.active{background:#2563eb;color:#fff}
footer{margin-top:16px;color:#6b7280;font-size:13px}

.context{margin-top:8px;padding:8px;border-radius:6px;background:#fff;border:1px solid #e6e8eb}
.context-text{font-size:13px;color:#111;margin-bottom:6px}
.meta{font-size:12px;color:#6b7280}
.loading{font-style:italic;color:#374151}

.chat-area{display:flex;flex-direction:column;gap:12px}
.chat-header{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:linear-gradient(90deg,#f8fafc,#eef2ff);border-radius:8px}
.chat-header .title{font-weight:600;color:#0f172a}
.chat-header .actions .icon{background:transparent;border:1px solid #e6e8eb;padding:6px;border-radius:6px;cursor:pointer}
.history{max-height:520px;overflow:auto;padding:16px;border-radius:10px;background:linear-gradient(180deg,#ffffff,#f9fafb);border:1px solid #e6e8eb;box-shadow:0 6px 18px rgba(12,15,20,0.04)}
.msg{margin-bottom:10px}
.msg .msg-text{padding:12px;border-radius:10px;display:inline-block;max-width:80%}
.msg.user .msg-text{background:#dcf0ff;color:#042a54}
.msg.assistant .msg-text{background:#f3f4ff;color:#0b1220}
.msg.system .msg-text{color:#6b7280;font-style:italic;background:transparent;padding:0}
.msg-meta{font-size:11px;color:#6b7280;margin-top:4px}
.msg-meta .time{margin-left:6px}
.contexts{margin-top:12px}
.context{padding:8px;border-radius:6px;background:#fff;border:1px solid #e6e8eb;margin-bottom:8px}
.context-text{font-size:13px;color:#111;margin-bottom:6px}
.spinner{display:inline-block;width:14px;height:14px;border:2px solid #c7d2fe;border-top-color:#6366f1;border-radius:50%;animation:spin 1s linear infinite;margin-right:8px}
@keyframes spin{to{transform:rotate(360deg)}}
.primary{background:#4f46e5;color:#fff}
.secondary{background:#eef2ff;color:#0f172a}
textarea#message{min-height:84px;resize:vertical;padding:12px;border-radius:8px;border:1px solid #e6e8eb}
button{border:none;padding:8px 12px;border-radius:8px;cursor:pointer;transition:transform .08s ease}
button:active{transform:scale(.98)}
#app.fullscreen{position:fixed;inset:8px;z-index:9999;background:#fff;border-radius:10px;padding:20px;box-shadow:0 30px 80px rgba(2,6,23,0.3)}
@media (max-width:600px){
  .history{max-height:360px}
  textarea#message{min-height:64px}
}

/* UI helpers: copy buttons, toggles, dark theme */
.msg-actions{display:inline-block;margin-left:8px;vertical-align:top}
.copy-btn{background:transparent;border:1px solid #e6e8eb;padding:6px 8px;border-radius:6px;font-size:12px;cursor:pointer;margin-left:8px}
.copy-btn:hover{background:#f3f4ff}
.context .copy-btn{display:inline-block;margin-top:8px;background:#eef2ff;color:#0f172a;border:1px solid #e6e8eb;padding:6px 8px;border-radius:6px}
.toggle-ctx{background:transparent;border:none;color:#2563eb;cursor:pointer;font-size:13px;margin-left:8px}

/* Dark theme */
body.dark{background:#0b1220;color:#e6eef8}
body.dark #app{background:#071226;box-shadow: 0 10px 30px rgba(0,0,0,0.6)}
body.dark textarea{background:#061226;border:1px solid #102236;color:#e6eef8}
body.dark .history{background:linear-gradient(180deg,#021025,#05142a);border:1px solid #102236}
body.dark .msg.user .msg-text{background:#123044;color:#e6eef8}
body.dark .msg.assistant .msg-text{background:#122033;color:#e6eef8}
body.dark .chat-header{background:linear-gradient(90deg,#021022,#031426)}
body.dark .copy-btn{border-color:#203e5b;color:#e6eef8}
body.dark .toggle-ctx{color:#9ad0ff}

.hidden{display:none}
.context-text .full{display:block}
